# D_LVAE Sweep: Lognorm Pruning Strategy (Unconditional)
# Focus: Systematic exploration of percentile (threshold) effects with fixed alpha=1.0
# Fixed: alpha=0.0, conditional_predictor=False (unconditional mode), all other defaults from d_lvae_2d.py
# This sweep tests unconditional performance prediction (predictor uses only latent codes, no conditions)

method: grid  # Use grid for complete coverage
metric:
  name: val_rec
  goal: minimize

parameters:
  # Problem - override via command line for each problem sweep
  problem_id:
    value: heatconduction2d  # Change per problem: beams2d, heatconduction2d, etc.

  # Fixed training parameters (keep constant to isolate pruning effects)
  n_epochs:
    value: 2500
  batch_size:
    value: 128
  lr:
    value: 0.0001

  # Fixed LVAE parameters (match defaults from d_lvae_2d.py)
  latent_dim:
    value: 250
  w_v:
    value: 0.01
  w_p:
    value: 0.1  # Reduced from 1.0 to prevent performance loss dominance
  eta:
    value: 0.0001
  polynomial_schedule_n:
    value: 100
  polynomial_schedule_p:
    value: 2
  pruning_epoch:
    value: 500
  beta:
    value: 0.9

  # Pruning strategy: LOGNORM only
  pruning_strategy:
    value: lognorm
  percentile:
    value: 0.05
  perf_dim:
    values: [1, 5, 10, 25, -1]

  # Multiple seeds for statistical significance
  seed:
    values: [1, 2, 3]

program: engiopt/lvae_2d/d_lvae_2d.py
